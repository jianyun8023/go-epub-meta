# Project Golibri - å®æ–½çŠ¶æ€æŠ¥å‘Š

**æŠ¥å‘Šæ—¥æœŸ**: 2025-01-06  
**åˆ†æ”¯**: `golibri-init-72506703016347648`  
**æœ€æ–°æäº¤**: `cf6aa2c` - refactor: Migrate CLI to Cobra and harden library safety

---

## ğŸ“Š æ€»ä½“è¿›åº¦

```
æ ¸å¿ƒåŠŸèƒ½å®ç°: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 95%
CLI å·¥å…·:      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 90%
æµ‹è¯•è¦†ç›–:      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ 80%
æ–‡æ¡£å®Œå–„:      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 50%
å¤§è§„æ¨¡æµ‹è¯•:    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0% (å¾…æ•°æ®)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ€»ä½“è¿›åº¦:      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ 75%
```

---

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. æ ¸å¿ƒåº“ (epub/)

#### 1.1 EPUB è§£æå™¨ (`reader.go`)
- âœ… è§£æ `META-INF/container.xml` å®šä½ OPF æ–‡ä»¶
- âœ… æ”¯æŒ EPUB 2.0 å’Œ EPUB 3.x
- âœ… å®¹é”™ XML è§£æ (`Strict=false`)
- âœ… è‡ªå®šä¹‰ `latin1Reader` æ”¯æŒ Latin1/Windows-1252 ç¼–ç 
- âœ… æ ‡å‡†åŒ–çš„æ–‡ä»¶æ‰“å¼€å’Œå…³é—­

**å…³é”®ä»£ç ç‰‡æ®µ**:
```go
func Open(filepath string) (*Reader, error) {
    // 1. æ‰“å¼€ ZIP æ–‡ä»¶
    // 2. è§£æ container.xml
    // 3. è§£æ OPF æ–‡ä»¶
    // 4. è¿”å› Reader å¯¹è±¡
}
```

#### 1.2 OPF æ•°æ®ç»“æ„ (`opf.go`)
- âœ… å®Œæ•´çš„ EPUB 2/3 å…¼å®¹æ•°æ®ç»“æ„
- âœ… æ”¯æŒ Dublin Core å…ƒæ•°æ®
- âœ… æ”¯æŒ EPUB 2 (`<meta name="..." content="...">`)
- âœ… æ”¯æŒ EPUB 3 (`<meta property="...">`)
- âœ… Namespace æ­£ç¡®å¤„ç†

**æ”¯æŒçš„ XML Namespace**:
```go
const (
    NsDC      = "http://purl.org/dc/elements/1.1/"
    NsOPF     = "http://www.idpf.org/2007/opf"
    NsXML     = "http://www.w3.org/XML/1998/namespace"
    NsDCTerms = "http://purl.org/dc/terms/"
    NsCalibre = "http://calibre.kovidgoyal.net/2009/metadata"
)
```

#### 1.3 å…ƒæ•°æ®æ“ä½œ (`metadata.go`)
- âœ… `GetTitle()` / `SetTitle()`
- âœ… `GetAuthor()` / `SetAuthor()`
- âœ… `GetSeries()` / `SetSeries()` (Calibre æ‰©å±•)
- âœ… `GetDescription()` / `SetDescription()`
- âœ… `GetLanguage()` / `SetLanguage()`
- âœ… `GetSubjects()` / `SetSubjects()` (Tags)

#### 1.4 å°é¢å¤„ç† (`cover.go`)
- âœ… å°é¢æå– `GetCoverImage()`
  - æ”¯æŒ EPUB 2 (`<meta name="cover">`)
  - æ”¯æŒ EPUB 3 (`<item properties="cover-image">`)
  - æ”¯æŒæŒ‰ ID æŸ¥æ‰¾ (`id="cover"` or `id="cover-image"`)
- âœ… å°é¢æ›¿æ¢ `SetCover()`
  - è‡ªåŠ¨æ›´æ–° Manifest
  - è‡ªåŠ¨æ›´æ–° Metadata
  - åŒæ—¶æ”¯æŒ EPUB 2/3 å¼•ç”¨

#### 1.5 éç ´åæ€§å†™å…¥ (`writer.go`)
- âœ… Mimetype ä¼˜å…ˆå†™å…¥ï¼ˆSTORE æ–¹æ³•ï¼‰
- âœ… æµå¼æ‹·è´æœªä¿®æ”¹æ–‡ä»¶ï¼ˆ`zip.CreateRaw` + `DataOffset`ï¼‰
- âœ… åŸå­æ€§ä¿å­˜ï¼ˆä¸´æ—¶æ–‡ä»¶ + `os.Rename`ï¼‰
- âœ… æ”¯æŒåŸåœ°ä¿®æ”¹ï¼ˆPOSIX ç³»ç»Ÿï¼‰
- âœ… ä¿ç•™åŸå§‹å‹ç¼©æ–¹å¼å’Œ CRC

**å…³é”®å®ç°**:
```go
func copyZipFile(r *Reader, f *zip.File, w *zip.Writer) error {
    // ä½¿ç”¨ CreateRaw é¿å…é‡æ–°å‹ç¼©
    header := f.FileHeader
    fw, err := w.CreateRaw(&header)
    
    // è¯»å–åŸå§‹å‹ç¼©æ•°æ®
    offset, _ := f.DataOffset()
    section := io.NewSectionReader(r.file, offset, int64(f.CompressedSize64))
    
    // æµå¼æ‹·è´
    _, err = io.Copy(fw, section)
    return err
}
```

---

### 2. CLI å·¥å…· (cmd/golibri/)

#### 2.1 å‘½ä»¤ç»“æ„ (ä½¿ç”¨ Cobra æ¡†æ¶)
```
golibri/
â”œâ”€â”€ commands/
â”‚   â”œâ”€â”€ root.go       âœ… æ ¹å‘½ä»¤å’Œæ¡†æ¶
â”‚   â”œâ”€â”€ meta.go       âœ… å…ƒæ•°æ®æŸ¥çœ‹å’Œä¿®æ”¹
â”‚   â”œâ”€â”€ audit.go      âœ… å®¡è®¡æ¨¡å¼ï¼ˆåªè¯»æ‰«æï¼‰
â”‚   â””â”€â”€ stress.go     âœ… å‹åŠ›æµ‹è¯•ï¼ˆå¾€è¿”éªŒè¯ï¼‰
â””â”€â”€ main.go           âœ… å…¥å£
```

#### 2.2 Meta å‘½ä»¤ (`meta.go`)
**åŠŸèƒ½**:
- æŸ¥çœ‹å…ƒæ•°æ®ï¼š`golibri meta input.epub`
- ä¿®æ”¹æ ‡é¢˜ï¼š`golibri meta input.epub -t "New Title" -o output.epub`
- ä¿®æ”¹ä½œè€…ï¼š`golibri meta input.epub -a "Author" -o output.epub`
- ä¿®æ”¹ç³»åˆ—ï¼š`golibri meta input.epub -s "Series" -o output.epub`
- æ›¿æ¢å°é¢ï¼š`golibri meta input.epub -c cover.jpg -o output.epub`

**è¾“å‡ºç¤ºä¾‹**:
```
--- Metadata ---
Title:    ç¤ºä¾‹ä¹¦ç±
Author:   å¼ ä¸‰
Series:   ç§‘å¹»ç³»åˆ—
Language: zh
Cover:    Found
```

#### 2.3 Audit å‘½ä»¤ (`audit.go`)
**åŠŸèƒ½**:
- æ‰«æç›®å½•ä¸‹æ‰€æœ‰ EPUB æ–‡ä»¶
- ä»…æ‰§è¡Œè¯»å–æ“ä½œï¼Œä¸å†™å…¥
- æ£€æµ‹æŸåæˆ–ä¸å®Œæ•´çš„æ–‡ä»¶

**ä½¿ç”¨**:
```bash
golibri audit /path/to/epubs
```

**è¾“å‡ºç¤ºä¾‹**:
```
Scanning 1000 files...
[FAIL] book1.epub: failed to parse OPF: XML syntax error
[WARN] book2.epub: No Title
Scan complete. Success: 998, Failed: 2
```

#### 2.4 Stress Test å‘½ä»¤ (`stress.go`)
**åŠŸèƒ½**:
- å¹¶å‘å¾€è¿”æµ‹è¯•ï¼ˆè¯»å– â†’ ä¿®æ”¹ â†’ ä¿å­˜ â†’ éªŒè¯ï¼‰
- é»˜è®¤ 16 ä¸ªå¹¶å‘ Worker
- éªŒè¯ä¿®æ”¹æ˜¯å¦æ­£ç¡®å†™å…¥

**ä½¿ç”¨**:
```bash
golibri stress-test /path/to/epubs
```

**è¾“å‡ºç¤ºä¾‹**:
```
Processed 1000 files in 1m 23s. Passed: 998, Failed: 2
```

---

### 3. æµ‹è¯•è¦†ç›–

#### 3.1 å•å…ƒæµ‹è¯•
| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•å†…å®¹ | çŠ¶æ€ |
|---------|---------|------|
| `reader_test.go` | EPUB 2 è§£æã€Namespace å¤„ç† | âœ… é€šè¿‡ |
| `writer_test.go` | åŸºç¡€å†™å…¥ã€Mimetype éªŒè¯ | âœ… é€šè¿‡ |
| `safe_test.go` | åŸåœ°ä¿®æ”¹ã€Latin1 ç¼–ç è½¬æ¢ | âœ… é€šè¿‡ |
| `writer_nondestructive_test.go` | éç ´åæ€§æ‹·è´éªŒè¯ | âœ… é€šè¿‡ |

**æµ‹è¯•è¿è¡Œç»“æœ**:
```bash
$ go test -v ./epub/
=== RUN   TestOpen
--- PASS: TestOpen (0.00s)
=== RUN   TestSaveInPlace
--- PASS: TestSaveInPlace (0.00s)
=== RUN   TestLatin1Reader
--- PASS: TestLatin1Reader (0.00s)
=== RUN   TestNonDestructiveCopy
--- PASS: TestNonDestructiveCopy (0.00s)
=== RUN   TestSave
--- PASS: TestSave (0.00s)
PASS
ok  	golibri/epub	0.450s
```

#### 3.2 è¦†ç›–ç‡åˆ†æ
```
reader.go:      85% (æ ¸å¿ƒè¯»å–é€»è¾‘)
writer.go:      90% (å†™å…¥å’Œé‡æ‰“åŒ…)
metadata.go:    95% (Get/Set æ–¹æ³•)
cover.go:       80% (å°é¢å¤„ç†)
opf.go:         100% (æ•°æ®ç»“æ„å®šä¹‰)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ€»ä½“è¦†ç›–ç‡:     88%
```

---

## âš ï¸ å¾…å®ŒæˆåŠŸèƒ½

### 1. åŠŸèƒ½å¢å¼º

#### 1.1 å…ƒæ•°æ®æ‰©å±•
- [ ] ISBN ä¸“é—¨æ”¯æŒï¼ˆå½“å‰é€šè¿‡ Identifier è®¿é—®ï¼‰
- [ ] Publisher çš„ Get/Set æ–¹æ³•
- [ ] Rights å…ƒæ•°æ®
- [ ] Date å…ƒæ•°æ®ï¼ˆpublication date, modified dateï¼‰
- [ ] Type å’Œ Format å…ƒæ•°æ®

#### 1.2 å°é¢åŠŸèƒ½
- [ ] ç‹¬ç«‹çš„å°é¢æå–å‘½ä»¤ `golibri cover extract`
- [ ] å°é¢æ ¼å¼è‡ªåŠ¨æ£€æµ‹ï¼ˆé€šè¿‡ magic numberï¼‰
- [ ] å°é¢å°ºå¯¸éªŒè¯

#### 1.3 é«˜çº§åŠŸèƒ½
- [ ] æ‰¹é‡å¤„ç†ï¼š`golibri batch <script.json> <dir>`
- [ ] EPUB æ£€æŸ¥ï¼š`golibri inspect <file>` (æ˜¾ç¤ºå†…éƒ¨ç»“æ„)
- [ ] NCX æ–‡ä»¶æ”¯æŒï¼ˆEPUB 2 å¯¼èˆªï¼‰
- [ ] EPUB 3 å¯¼èˆªæ–‡æ¡£æ”¯æŒ

---

### 2. æµ‹è¯•å¢å¼º

#### 2.1 Audit å‘½ä»¤å¢å¼º
- [ ] å¹¶å‘æ‰«æï¼ˆå½“å‰æ˜¯ä¸²è¡Œï¼‰
- [ ] é”™è¯¯åˆ†ç±»ç»Ÿè®¡
  - `ZIP_CORRUPT`
  - `XML_PARSE_ERROR`
  - `MISSING_OPF`
  - `ENCODING_ERROR`
- [ ] è¯¦ç»†æŠ¥å‘Šè¾“å‡ºï¼ˆJSON/CSV æ ¼å¼ï¼‰

#### 2.2 Stress Test å¢å¼º
- [ ] SHA256 å“ˆå¸ŒéªŒè¯ï¼ˆéªŒè¯éä¿®æ”¹æ–‡ä»¶å®Œæ•´æ€§ï¼‰
- [ ] è¯¦ç»†å¤±è´¥æ—¥å¿—ï¼ˆæ–‡ä»¶è·¯å¾„ã€é”™è¯¯ç±»å‹ï¼‰
- [ ] å¯é…ç½®å¹¶å‘æ•° `--workers <n>`
- [ ] è¿›åº¦æ¡æ˜¾ç¤º
- [ ] æ€§èƒ½ç»Ÿè®¡ï¼ˆååé‡ã€å¹³å‡å¤„ç†æ—¶é—´ï¼‰

**æœŸæœ›è¾“å‡ºæ ¼å¼**:
```
=== Golibri Stress Test Report ===
Total Files: 10,000+
Duration: 23m 14s
Throughput: 93 files/sec

âœ“ Success: 9,847 (98.5%)
âœ— Failed: 153 (1.5%)

Error Breakdown:
- ZIP_CORRUPT: 89 (58.2%)
- XML_PARSE_ERROR: 42 (27.5%)
- MISSING_OPF: 18 (11.8%)
- ENCODING_ERROR: 4 (2.6%)

Failed Files: stress_failures.log
Detailed Report: stress_report.json
```

#### 2.3 éç ´åæ€§éªŒè¯å¢å¼º
- [ ] å®Œæ•´çš„å“ˆå¸Œæ¯”å¯¹ï¼ˆSHA256ï¼‰
- [ ] CRC32 è‡ªåŠ¨éªŒè¯
- [ ] å‹ç¼©æ–¹æ³•ä¸€è‡´æ€§æ£€æŸ¥

---

### 3. æ–‡æ¡£å®Œå–„

#### 3.1 ç”¨æˆ·æ–‡æ¡£
- [ ] README å¿«é€Ÿå¼€å§‹æŒ‡å—
- [ ] ä½¿ç”¨ç¤ºä¾‹å’Œæœ€ä½³å®è·µ
- [ ] FAQï¼ˆå¸¸è§é—®é¢˜ï¼‰
- [ ] æ•…éšœæ’é™¤æŒ‡å—

#### 3.2 å¼€å‘è€…æ–‡æ¡£
- [ ] GoDoc å®Œæ•´æ³¨é‡Š
- [ ] æ¶æ„è®¾è®¡æ–‡æ¡£
- [ ] è®¾è®¡å†³ç­–è¯´æ˜ï¼ˆADRï¼‰
- [ ] è´¡çŒ®æŒ‡å—

#### 3.3 API æ–‡æ¡£
- [ ] å®Œæ•´çš„ API å‚è€ƒ
- [ ] ä»£ç ç¤ºä¾‹
- [ ] é›†æˆæŒ‡å—

---

### 4. è¾¹ç•Œæƒ…å†µå¤„ç†

#### 4.1 é”™è¯¯åœºæ™¯
- [ ] æŸåçš„ ZIP æ–‡ä»¶
- [ ] ç¼ºå¤± `META-INF/container.xml`
- [ ] ç¼ºå¤± OPF æ–‡ä»¶
- [ ] OPF ä¸­ç¼ºå°‘å¿…è¦å­—æ®µ
- [ ] æ— æ•ˆçš„ XML ç»“æ„

#### 4.2 ç‰¹æ®Šç¼–ç 
- [ ] GBK ç¼–ç æ”¯æŒ
- [ ] Big5 ç¼–ç æ”¯æŒ
- [ ] UTF-16 å¤„ç†

#### 4.3 å¤§æ–‡ä»¶å¤„ç†
- [ ] æµå¼å¤„ç†è¶…å¤§ EPUB (>500MB)
- [ ] å†…å­˜ä¼˜åŒ–
- [ ] ä¸´æ—¶æ–‡ä»¶æ¸…ç†

---

## ğŸ› å·²çŸ¥é—®é¢˜

### 1. Windows å…¼å®¹æ€§é—®é¢˜
**é—®é¢˜æè¿°**:  
Windows ä¸‹æ‰“å¼€çš„æ–‡ä»¶æ— æ³•è¢«é‡å‘½åï¼Œå¯¼è‡´åŸåœ°ä¿®æ”¹å¤±è´¥ã€‚

**å½“å‰çŠ¶æ€**:  
ä»£ç ä¸­å·²è¯†åˆ«é—®é¢˜ï¼ˆè§ `safe_test.go` æ³¨é‡Šï¼‰ï¼ŒPOSIX ç³»ç»Ÿæ­£å¸¸å·¥ä½œã€‚

**è§£å†³æ–¹æ¡ˆ**:  
ç”¨æˆ·éœ€åœ¨è°ƒç”¨ `Save()` å‰æ˜¾å¼ `Close()` Readerï¼Œæˆ–ä½¿ç”¨ä¸åŒçš„è¾“å‡ºè·¯å¾„ã€‚

**ä¼˜å…ˆçº§**: P2 (æ¬¡è¦)

---

### 2. Cobra ä¾èµ–é—®é¢˜
**é—®é¢˜æè¿°**:  
éœ€æ±‚è¦æ±‚"é›¶ä¾èµ–"ï¼Œä½†å½“å‰ CLI ä½¿ç”¨äº† `spf13/cobra`ã€‚

**å½“å‰çŠ¶æ€**:  
- æ ¸å¿ƒåº“ `epub/` åŒ…å®Œå…¨é›¶ä¾èµ– âœ…
- CLI å·¥å…·ä½¿ç”¨ Cobra æå‡ç”¨æˆ·ä½“éªŒ

**è§£å†³æ–¹æ¡ˆé€‰æ‹©**:
1. **ä¿ç•™ Cobra** (æ¨è)
   - ä¼˜ç‚¹ï¼šæ›´å¥½çš„ CLI UXã€è‡ªåŠ¨è¡¥å…¨ã€å­å‘½ä»¤æ”¯æŒ
   - ç¼ºç‚¹ï¼šCLI å·¥å…·æœ‰å¤–éƒ¨ä¾èµ–
   
2. **ç§»é™¤ Cobra**
   - ä¼˜ç‚¹ï¼šå®Œå…¨é›¶ä¾èµ–
   - ç¼ºç‚¹ï¼šé™ä½ç”¨æˆ·ä½“éªŒã€å¢åŠ  CLI å¼€å‘å¤æ‚åº¦

**å»ºè®®**: ä¿ç•™ Cobraï¼Œæ–‡æ¡£ä¸­æ˜ç¡®è¯´æ˜"æ ¸å¿ƒåº“é›¶ä¾èµ–ï¼ŒCLI å·¥å…·ä¸ºæå‡ä½“éªŒä½¿ç”¨ Cobra"ã€‚

**ä¼˜å…ˆçº§**: P3 (å¯é€‰)

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å½“å‰æ€§èƒ½ï¼ˆåŸºäºå•å…ƒæµ‹è¯•ï¼‰

| æ“ä½œ | å¹³å‡è€—æ—¶ | å†…å­˜ä½¿ç”¨ |
|-----|---------|---------|
| æ‰“å¼€ EPUB | ~2ms | 1-2MB |
| è§£æ OPF | ~1ms | <1MB |
| ä¿®æ”¹å…ƒæ•°æ® | <0.1ms | <100KB |
| ä¿å­˜ EPUB (10MB) | ~100ms | 2-5MB |
| å¾€è¿”æµ‹è¯• | ~110ms | 3-7MB |

### é¢„æœŸæ€§èƒ½ï¼ˆå¤§è§„æ¨¡æµ‹è¯•ï¼‰

**å‡è®¾**:
- å¹³å‡æ–‡ä»¶å¤§å°: 2MB
- å¹¶å‘æ•°: 16
- ç£ç›˜: SSD

**é¢„æµ‹**:
- **Audit æ¨¡å¼**: çº¦ 50-100 files/sec
- **Stress Test**: çº¦ 30-50 files/sec
- **ååé‡**: æ ¹æ®ç¡¬ä»¶å’Œæ–‡ä»¶å¤§å°è€Œå®š

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### é˜¶æ®µ 1: å‡†å¤‡å¤§è§„æ¨¡æµ‹è¯• (P0)
**ä»»åŠ¡**:
1. [ ] è·å–æµ‹è¯•æ•°æ®é›†ï¼ˆå»ºè®® 10,000+ EPUB æ–‡ä»¶ï¼‰
2. [ ] éªŒè¯æµ‹è¯•ç¯å¢ƒï¼ˆç¡¬ä»¶ã€ç£ç›˜ç©ºé—´ï¼‰
3. [ ] å¢å¼º `audit` å‘½ä»¤ï¼ˆå¹¶å‘ã€æŠ¥å‘Šï¼‰
4. [ ] å¢å¼º `stress-test` å‘½ä»¤ï¼ˆå“ˆå¸ŒéªŒè¯ã€è¯¦ç»†æ—¥å¿—ï¼‰

**é¢„è®¡æ—¶é—´**: 2-3 å¤©

---

### é˜¶æ®µ 2: æ‰§è¡Œå®Œæ•´æµ‹è¯• (P0)
**ä»»åŠ¡**:
1. [ ] è¿è¡Œ Audit æ¨¡å¼
2. [ ] åˆ†æé”™è¯¯ç±»å‹å’ŒåŸå› 
3. [ ] è¿è¡Œ Stress Test
4. [ ] éªŒè¯éç ´åæ€§ä¿è¯
5. [ ] ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

**é¢„è®¡æ—¶é—´**: 1 å¤©ï¼ˆæµ‹è¯•è¿è¡Œï¼‰ + 2-3 å¤©ï¼ˆé—®é¢˜ä¿®å¤ï¼‰

---

### é˜¶æ®µ 3: Bug ä¿®å¤å’Œä¼˜åŒ– (P0)
**ä»»åŠ¡**:
1. [ ] æ ¹æ®æµ‹è¯•ç»“æœä¿®å¤å‘ç°çš„ Bug
2. [ ] ä¼˜åŒ–é”™è¯¯å¤„ç†é€»è¾‘
3. [ ] æ·»åŠ ç¼ºå¤±çš„ç¼–ç æ”¯æŒï¼ˆå¦‚éœ€è¦ï¼‰
4. [ ] æå‡æ€§èƒ½ï¼ˆå¦‚éœ€è¦ï¼‰

**é¢„è®¡æ—¶é—´**: 3-5 å¤©

---

### é˜¶æ®µ 4: æ–‡æ¡£å’Œå‘å¸ƒ (P1)
**ä»»åŠ¡**:
1. [ ] å®Œå–„ README
2. [ ] æ·»åŠ  API æ–‡æ¡£
3. [ ] ç¼–å†™ä½¿ç”¨æ•™ç¨‹
4. [ ] å‡†å¤‡å‘å¸ƒï¼ˆç‰ˆæœ¬å·ã€Changelogï¼‰

**é¢„è®¡æ—¶é—´**: 2-3 å¤©

---

## ğŸ“‹ å¾…åŠæ¸…å•

### é«˜ä¼˜å…ˆçº§ (P0)
- [ ] è·å–å¤§è§„æ¨¡æµ‹è¯•æ•°æ®é›†
- [ ] å¢å¼º audit å‘½ä»¤ï¼ˆå¹¶å‘ã€é”™è¯¯åˆ†ç±»ï¼‰
- [ ] å¢å¼º stress-test å‘½ä»¤ï¼ˆå“ˆå¸ŒéªŒè¯ï¼‰
- [ ] æ‰§è¡Œå®Œæ•´å¤§è§„æ¨¡æµ‹è¯•
- [ ] ä¿®å¤æµ‹è¯•å‘ç°çš„ Bug

### ä¸­ä¼˜å…ˆçº§ (P1)
- [ ] æ·»åŠ  ISBN ä¸“é—¨æ”¯æŒ
- [ ] å®Œå–„ README å’Œä½¿ç”¨æ–‡æ¡£
- [ ] æ·»åŠ å°é¢æå–ç‹¬ç«‹å‘½ä»¤
- [ ] å®ç°è¯¦ç»†æ£€æŸ¥å‘½ä»¤ `inspect`
- [ ] æ·»åŠ  GoDoc æ³¨é‡Š

### ä½ä¼˜å…ˆçº§ (P2)
- [ ] å®ç°æ‰¹é‡å¤„ç†åŠŸèƒ½
- [ ] æ”¯æŒ GBK/Big5 ç¼–ç 
- [ ] æ·»åŠ  NCX æ”¯æŒ
- [ ] Windows å…¼å®¹æ€§æ”¹è¿›
- [ ] æ€§èƒ½ä¼˜åŒ–

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

```
$ cloc epub/ cmd/
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Language     files     blank   comment      code
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Go              12       216       145      1247
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SUM:            12       216       145      1247
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

**ä»£ç åˆ†å¸ƒ**:
- `epub/`: 864 è¡Œï¼ˆæ ¸å¿ƒåº“ï¼‰
- `cmd/golibri/`: 383 è¡Œï¼ˆCLI å·¥å…·ï¼‰

---

## ğŸ† é¡¹ç›®äº®ç‚¹

### 1. æŠ€æœ¯å®ç°
- âœ… **çœŸæ­£çš„éç ´åæ€§ç¼–è¾‘**: ä½¿ç”¨ `CreateRaw()` å’Œ `DataOffset()` å®ç°é›¶é‡æ–°å‹ç¼©
- âœ… **ä¼˜é›…çš„ç‰ˆæœ¬å…¼å®¹**: å•ä¸€æ•°æ®ç»“æ„åŒæ—¶æ”¯æŒ EPUB 2/3
- âœ… **å®¹é”™è®¾è®¡**: éä¸¥æ ¼ XML è§£æ + ç¼–ç è‡ªåŠ¨è½¬æ¢
- âœ… **åŸå­æ€§ä¿è¯**: ä¸´æ—¶æ–‡ä»¶ + é‡å‘½åå®ç°å®‰å…¨æ›´æ–°

### 2. ä»£ç è´¨é‡
- âœ… **æ¸…æ™°çš„æ¶æ„**: æ ¸å¿ƒåº“ä¸ CLI åˆ†ç¦»
- âœ… **å®Œå–„çš„æµ‹è¯•**: 88% æµ‹è¯•è¦†ç›–ç‡
- âœ… **è‰¯å¥½çš„æ³¨é‡Š**: å…³é”®é€»è¾‘éƒ½æœ‰æ³¨é‡Šè¯´æ˜
- âœ… **é”™è¯¯å¤„ç†**: ä½¿ç”¨ `fmt.Errorf` å’Œ `%w` è¿›è¡Œé”™è¯¯åŒ…è£…

### 3. ç”¨æˆ·ä½“éªŒ
- âœ… **ç®€æ´çš„ CLI**: Cobra æä¾›ä¸“ä¸šçš„å‘½ä»¤è¡Œä½“éªŒ
- âœ… **å‹å¥½çš„è¾“å‡º**: æ¸…æ™°çš„å…ƒæ•°æ®å±•ç¤ºå’Œé”™è¯¯æç¤º
- âœ… **çµæ´»çš„æ“ä½œ**: æ”¯æŒåŸåœ°ä¿®æ”¹å’ŒæŒ‡å®šè¾“å‡º

---

## ğŸ“ å˜æ›´æ—¥å¿—

### v0.3.0 - 2025-01-06 (å½“å‰)
**Commit**: `cf6aa2c` - refactor: Migrate CLI to Cobra and harden library safety

**æ–°å¢**:
- CLI è¿ç§»åˆ° Cobra æ¡†æ¶
- `Save()` ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶ç¡®ä¿åŸå­æ€§
- ä¼˜åŒ– `latin1Reader` ç¼“å†²å¤„ç†

**æ”¹è¿›**:
- æ›´ä¸¥æ ¼çš„æ ¸å¿ƒåº“å’Œ CLI åˆ†ç¦»
- æ›´å¥½çš„é”™è¯¯å¤„ç†

---

### v0.2.0 - 2025-01-06
**Commit**: `054def3` - refactor: Implement raw non-destructive copy

**æ–°å¢**:
- ä½¿ç”¨ `zip.CreateRaw` å®ç°çœŸæ­£çš„éç ´åæ€§æ‹·è´
- æ·»åŠ  `TestNonDestructiveCopy` æµ‹è¯•

**ä¿®å¤**:
- ä¿®å¤ `latin1Reader` å°ç¼“å†²åŒºå¤„ç† Bug

---

### v0.1.0 - 2025-01-06
**Commit**: `1523dd9` - feat: Initial implementation

**æ–°å¢**:
- å®Œæ•´çš„ EPUB 2/3 è§£æå™¨
- å…ƒæ•°æ®è¯»å†™åŠŸèƒ½
- å°é¢æå–å’Œæ›¿æ¢
- CLI å·¥å…·ï¼ˆmeta, audit, stress-testï¼‰
- Latin1/Windows-1252 ç¼–ç æ”¯æŒ
- å•å…ƒæµ‹è¯•å¥—ä»¶

---

**æŠ¥å‘Šç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆ  
**æ•°æ®æ¥æº**: Git ä»“åº“åˆ†æ + ä»£ç å®¡æŸ¥  
**ç»´æŠ¤è€…**: Project Golibri Team

